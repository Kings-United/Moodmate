{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { journalAPI } from '../services/api';\nexport const useJournal = () => {\n  _s();\n  const [entries, setEntries] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const fetchEntries = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await journalAPI.getEntries();\n\n      // Debug logging for entries data\n      console.log('Journal entries received:', response.data);\n\n      // Validate and clean entries data\n      const validEntries = response.data.map(entry => {\n        // Ensure createdAt is a valid date\n        if (entry.createdAt) {\n          const date = new Date(entry.createdAt);\n          if (isNaN(date.getTime())) {\n            console.warn('Invalid date found in entry:', entry.id, entry.createdAt);\n            entry.createdAt = new Date().toISOString(); // Use current date as fallback\n          }\n        } else {\n          console.warn('Missing createdAt in entry:', entry.id);\n          entry.createdAt = new Date().toISOString(); // Use current date as fallback\n        }\n        return entry;\n      });\n      setEntries(validEntries);\n    } catch (error) {\n      console.error('Error fetching entries:', error);\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchEntries();\n  }, []);\n  const addEntry = async entryData => {\n    try {\n      const response = await journalAPI.createEntry(entryData);\n      setEntries(prev => [response.data, ...prev]);\n      return response.data;\n    } catch (error) {\n      console.error('Error adding entry:', error);\n      throw error;\n    }\n  };\n  const updateEntry = async (id, entryData) => {\n    try {\n      const response = await journalAPI.updateEntry(id, entryData);\n      setEntries(prev => prev.map(entry => entry.id === id ? response.data : entry));\n      return response.data;\n    } catch (error) {\n      console.error('Error updating entry:', error);\n      throw error;\n    }\n  };\n  const deleteEntry = async id => {\n    try {\n      await journalAPI.deleteEntry(id);\n      setEntries(prev => prev.filter(entry => entry.id !== id));\n    } catch (error) {\n      console.error('Error deleting entry:', error);\n      throw error;\n    }\n  };\n  return {\n    entries,\n    loading,\n    error,\n    addEntry,\n    updateEntry,\n    deleteEntry,\n    refetch: fetchEntries\n  };\n};\n_s(useJournal, \"VXxnBTQjStzwAeJpYl63scOGlic=\");","map":{"version":3,"names":["useState","useEffect","journalAPI","useJournal","_s","entries","setEntries","loading","setLoading","error","setError","fetchEntries","response","getEntries","console","log","data","validEntries","map","entry","createdAt","date","Date","isNaN","getTime","warn","id","toISOString","message","addEntry","entryData","createEntry","prev","updateEntry","deleteEntry","filter","refetch"],"sources":["C:/Users/Mayur/OneDrive/Desktop/Moodmate/Frontend/src/hooks/useJournal.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { journalAPI } from '../services/api';\r\n\r\nexport const useJournal = () => {\r\n    const [entries, setEntries] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const fetchEntries = async () => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            const response = await journalAPI.getEntries();\r\n            \r\n            // Debug logging for entries data\r\n            console.log('Journal entries received:', response.data);\r\n            \r\n            // Validate and clean entries data\r\n            const validEntries = response.data.map(entry => {\r\n                // Ensure createdAt is a valid date\r\n                if (entry.createdAt) {\r\n                    const date = new Date(entry.createdAt);\r\n                    if (isNaN(date.getTime())) {\r\n                        console.warn('Invalid date found in entry:', entry.id, entry.createdAt);\r\n                        entry.createdAt = new Date().toISOString(); // Use current date as fallback\r\n                    }\r\n                } else {\r\n                    console.warn('Missing createdAt in entry:', entry.id);\r\n                    entry.createdAt = new Date().toISOString(); // Use current date as fallback\r\n                }\r\n                return entry;\r\n            });\r\n            \r\n            setEntries(validEntries);\r\n        } catch (error) {\r\n            console.error('Error fetching entries:', error);\r\n            setError(error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchEntries();\r\n    }, []);\r\n\r\n    const addEntry = async (entryData) => {\r\n        try {\r\n            const response = await journalAPI.createEntry(entryData);\r\n            setEntries(prev => [response.data, ...prev]);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error adding entry:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const updateEntry = async (id, entryData) => {\r\n        try {\r\n            const response = await journalAPI.updateEntry(id, entryData);\r\n            setEntries(prev => prev.map(entry => \r\n                entry.id === id ? response.data : entry\r\n            ));\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error updating entry:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const deleteEntry = async (id) => {\r\n        try {\r\n            await journalAPI.deleteEntry(id);\r\n            setEntries(prev => prev.filter(entry => entry.id !== id));\r\n        } catch (error) {\r\n            console.error('Error deleting entry:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    return {\r\n        entries,\r\n        loading,\r\n        error,\r\n        addEntry,\r\n        updateEntry,\r\n        deleteEntry,\r\n        refetch: fetchEntries\r\n    };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}